<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Elements Explained &mdash; YAFOWIL - Yet Another Form Widget Library</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="YAFOWIL - Yet Another Form Widget Library" href="index.html" />
    <link rel="next" title="Extend YAFOWIL - DYI Widgets" href="extend.html" />
    <link rel="prev" title="Usage" href="examples.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="extend.html" title="Extend YAFOWIL - DYI Widgets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Usage"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">YAFOWIL</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Elements Explained</a><ul>
<li><a class="reference external" href="#base-principles">Base Principles</a></li>
<li><a class="reference external" href="#callables-everywhere">Callables Everywhere</a></li>
<li><a class="reference external" href="#state-at-runtime">State at Runtime</a></li>
<li><a class="reference external" href="#the-widget">The widget</a></li>
<li><a class="reference external" href="#the-factory-has-the-plan">The Factory has the Plan</a></li>
<li><a class="reference external" href="#parts-of-blueprint">parts of blueprint</a></li>
<li><a class="reference external" href="#combining-blueprints">combining blueprints</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="examples.html"
                                  title="previous chapter">Usage</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="extend.html"
                                  title="next chapter">Extend YAFOWIL - DYI Widgets</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/architecture.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="elements-explained">
<h1>Elements Explained<a class="headerlink" href="#elements-explained" title="Permalink to this headline">¶</a></h1>
<div class="section" id="base-principles">
<h2>Base Principles<a class="headerlink" href="#base-principles" title="Permalink to this headline">¶</a></h2>
<p>YAFOWIL is based on a set of core ideas:</p>
<ol class="arabic simple">
<li>Runtime rules, static is subordinate,</li>
<li>Don&#8217;t mess with a framework,</li>
<li>Keep it simple and pythonic,</li>
<li>No fights with storage,</li>
<li>Use chains and trees as structures.</li>
</ol>
</div>
<div class="section" id="callables-everywhere">
<h2>Callables Everywhere<a class="headerlink" href="#callables-everywhere" title="Permalink to this headline">¶</a></h2>
<p>If you work with YAFOWIL first time it probably feel a bit different compared to
other multiple class inheritating, schema based forms. Instead YAFOWIL uses
simple callables at several places. You never need to inherit any class from
yafowil.* (and if you think you need to you didn&#8217;t understand the architecture).</p>
<p>Callables are used for every extensible aspect of YAFOWIL. Then they are bundled
and passed - as blueprints - to a factory.</p>
</div>
<div class="section" id="state-at-runtime">
<h2>State at Runtime<a class="headerlink" href="#state-at-runtime" title="Permalink to this headline">¶</a></h2>
<p>While one cycle (request to response) runs, the state of the widget is kept in
a runtime data object. It collects all information like value, request, errors
happend, and the rendered widget.</p>
</div>
<div class="section" id="the-widget">
<h2>The widget<a class="headerlink" href="#the-widget" title="Permalink to this headline">¶</a></h2>
<p>The widget class is generic.</p>
<ul class="simple">
<li>You never need to instanciate it direct. The factory is the only place where
this happens.</li>
<li>Except some very very rare cases you never touch it further. The controller
does the handling.</li>
</ul>
<p>Only at creation time of Widgets you need to use its dict-like api. This is the
case if you create compounds of widgets, i.e. a form or a fieldset.</p>
</div>
<div class="section" id="the-factory-has-the-plan">
<h2>The Factory has the Plan<a class="headerlink" href="#the-factory-has-the-plan" title="Permalink to this headline">¶</a></h2>
<p>The factory has blueprints of widgets registered by name. Its the generic plan
for a widget.</p>
</div>
<div class="section" id="parts-of-blueprint">
<h2>parts of blueprint<a class="headerlink" href="#parts-of-blueprint" title="Permalink to this headline">¶</a></h2>
<p>The plan consists of four chains of callables. Each chain has different
responsibilities.</p>
<dl class="docutils">
<dt>extractors</dt>
<dd>An extractor is responsible to get, convert and validate the data of the
current widget in context from the request. It is a callable expecting the
widget instance and the runtime data (with request, errors and values)
as parameters.</dd>
<dt>chain #1:</dt>
<dd>Extractors are chained. Example: An Integer Field consists of the
pure extractor which results in a string. Next extractor in the chain is
responsible to convert it to an integer. If it fails an error is marked,
otherwise the value on data is of type <tt class="docutils literal"><span class="pre">int</span></tt>. If only positive
integers are allowed we can add a validating extractor to the chain.</dd>
<dt>renderer</dt>
<dd>The renderer is responsible to create output (text, unicode) ready to
be passed to the response. It is a callable expecting the widget instance
and runtime data (after extraction run) as parameters. It can utilize any
templating language. YAFOWIL has no preferences nor does it support any
specific template language. All internal rendering in YAFOWIL happens in
pure python.</dd>
<dt>chain #2: renderers</dt>
<dd>Renderers are chained. The second renderer in the chain can access the
rendered output of the first and so on. Thus a pure html <tt class="docutils literal"><span class="pre">&lt;input</span> <span class="pre">..&gt;</span></tt>
widget can be wrapped with a label etc.</dd>
<dt>preprocessors</dt>
<dd>A preprocessor can be used in many different ways. It is executed in one
run (request to response) once direct after runtime data is created. It
gets widget and runtime data as parameters.</dd>
<dt>global preprocessors</dt>
<dd>A factory global preprocessor executed for every widget produced by the
factory. It will be executed before all other preprocessors are
running. It can be used to do framework specific conversions i.e. for the
request.</dd>
<dt>chain #3: preprocessors</dt>
<dd>Preprocessors are chained. The chain of preprocessors is executed once
per runtime data object.</dd>
<dt>builder</dt>
<dd>A builder is a callable responsible to automatically populate a widget
with child widgets. It expects the widget and the factory itself as
parameters. Its a kind of automatic compound and is executed at
factory time, at the time when factory is called to produce a widget right
after the parent widget is created and configured. Its intended use is to
make it easy to provide groups of widgets which are always the same. I.e.
a password validation widget consisting of two password input fields.</dd>
<dt>chain #4: builders</dt>
<dd>subwidgets are chained. The chain is executed one after one at factoring
time once per widget instance.</dd>
</dl>
</div>
<div class="section" id="combining-blueprints">
<h2>combining blueprints<a class="headerlink" href="#combining-blueprints" title="Permalink to this headline">¶</a></h2>
<p>Usually we have some common widgets, i.e a pure textarea, and then we need
some label, description, errors happened, maybe a table cell or a div around and
so on. And it can be very different dependent on the framework used or the design
we need to implement. But the core functionality is always the same. In other
words: The input field and its behavior is stable, the eye-candy around is not.</p>
<p>Its what the user of YAFOWIL can change with ease. At factory time, when the
widget is requested from the factory, additional configurations can be added by
passing a colon separated list of names, i.e <tt class="docutils literal"><span class="pre">label:textarea</span></tt> or
<tt class="docutils literal"><span class="pre">myproject.field:label:textarea</span></tt> and so on. Thus we can add every type of
chain: extractors (conversion, validation), renderers (wrap eye candy),
preprocessors and even builders.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="extend.html" title="Extend YAFOWIL - DYI Widgets"
             >next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Usage"
             >previous</a> |</li>
        <li><a href="index.html">YAFOWIL</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Jens W. Klein, BlueDynamics Alliance, Austria.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.7.
    </div>
  </body>
</html>